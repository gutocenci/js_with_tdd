<!DOCTYPE-HTML>
<html>
    <head>
        <title>ABA</title>
    </head>
    <body>
        <h1>CURSO JS COM TDD</h1>
        <button id="btn">Make my sandwich !</button>
        <button id="btnReduce">Reduce learning !</button>
        <ul id="table">
            <li>Primeiro</li>
            <li>Segundo</li>
            <li>Terceiro</li>
        </ul>
    </body>
    <script>

    //REDUCES ARROW FUNC
    const btnReduce = document.getElementById('btnReduce')
    btnReduce.addEventListener('click', ()=>{reduceTest()});

    function reduceTest(){
        reduceTeste.reduce((acc, part)=>{
            return acc + part
        },0)
    }

    //UMA CONST PODE ALTERAR VALOR
    const reduceTeste = [0,1,2,3,4,5]

        const will = { nome: 'gus', idade: 25};
        will.nome = 'carlos'
        console.log(will.nome)

        var nomes = ['Gustavo','Ana','Neto','Fer'];
        console.log(nomes);

        //TEMPLATE LITERALS E ARRAY PODE TER FUNC SEM PRECISAR ESCREVER FUNC NOVAMENTE
        var nomeFilter = nomes
            .filter(nome => nome == 'Ana')
            .map(nome => `Eu sou o(a) ${nome}`)
        
        var sandwich = { bread: 'Filão',
                            chease: 'Cheder',
                            prepare: ()=>console.log(`Saindo com ${sandwich.bread} e ${sandwich.chease}`)
        };
        const btn = document.getElementById('btn')
        btn.addEventListener('click', ()=>{sandwich.prepare()});

        //Template literals pega o enter, espaço e etc, nao precisa usar \n por exemplo
        console.log(`${nomes[1]}\n${nomes[2]}\n${nomes[3]}`)

        var templateLIteral = 
        `babana
        limao
        maca`
        console.log(templateLIteral)

        //Pode usar Arrow func para definir função dentro de arrays
        const article  = {
            header: 'OI HEADER',
            body: 'OI BODY',
            footer: 'OI FOOTER',
            language: ['js', 'ts', 'cs'],
            authot: 'gutocenci',
            funcs: nome => nome ? nome : `unknown`
        }

        //If literal como Excel
        function getAuthor(nome){
            return (nome) ? nome : `unknown`
        }

        //Alterando o HTML com template literals, func escopo global ou do array
        //Join para remover alterar ',' presente entre cada elemento do array 
        //Metodo JS para alterar uma tag no caso 'body'
        const markup = `
        <div>
            <header>
                <h1>${article.header}</h1>
            </header>
            <body>
                <p>${article.body}</p>
                <ul>${article.language.map(language=>`<li>${language}</li>`).join('')}</ul>
            </body>
            <footer>
                <p>${article.footer}</p>
                <p>${this.getAuthor(article.authot)}</p>
                <p>${article.funcs(article.authot)}</p>
            </footer>
        </div>
        `
        document.body.innerHTML = markup;

        //Template literal pode executar uma função antes de sua atribuição
        //Template literals aceita pegar o [i] de arrays e executar função se o elemento for func
        var nomes = ['Gustavo','Ana','Neto','Fer'];
        function greenFont(template, ...values){  
            return template.reduce((accumulador, part, index)=>{
                return `${accumulador}
                        <span style="color: blue">${values[index - 1].toUpperCase()}</span>
                        ${part}`    
            })
        }

        const tagedTemplate = greenFont`I am ${nomes[0]} and my some frinds at FATEC are ${nomes[1]}, ${nomes[2]}, and ${nomes[3]}`
        document.body.innerHTML = tagedTemplate;

        //Default Params
        function noneValueParams(name, nickName){
            return console.log(`Meu nome é ${name} e meu sobrenome é ${nickName}`)
        }

        noneValueParams()

        function withGambParams(name, nickName){
            name = name || 'gambName';
            nickName = nickName || 'gambnickName';
            return console.log(`Meu nome é ${name} e meu sobrenome é ${nickName}`)
        }

        withGambParams()

        function withoutGambParams(name = 'Gustavo', nickName = 'Cenci'){
            return console.log(`Meu nome é ${name} e meu sobrenome é ${nickName}`)
        }

        withoutGambParams('testeNome', 'testeNickName')
        withoutGambParams()

        //Metodos String ES6
        var string = 'string include '
        console.log(string.startsWith('s'))  //Returno boolean TREU
        console.log(string.startsWith('t',2)) //False terceiro elemento é 't'
        console.log(string.repeat(20));
        console.log(string.endsWith('include ')); // true
        console.log(string.includes('include'))

        //Metodos Array ES6
        var string = 'string to array'
        console.log(Array.from(string))
        var tableHtml = document.querySelectorAll('#table li')
        console.log('List HTML tipo NodeList',tableHtml) // Mas quero manipular como Arry por causa dos metodos
        var listArray = Array.from(tableHtml)
        var funcMap = listArray.map((list) => list.textContent)
        console.log(funcMap)

        var makeArray = Array.of([1,10,'texto',{nome: 'ABC',marca:'NANI'}]) //Cria uma Array de forma Rapida
        console.log(makeArray)

        var findArray = [
            {nome:'Gustavo', idade:26},
            {nome:'Geraldo', idade:52}
        ]
        
        var indexArray = findArray.find(person => person.nome == 'Gustavo') //Acha o Index
        var firstElementArray = findArray.findIndex(person => person.nome == 'Gustavo') //Acha o primeiro obejto que dar Match
        console.log('Index',indexArray)
        console.log('Elemento do Array',firstElementArray)

        var arrayToFill = new Array(50) //Instacia com 50 elementos
        var arrayAllFilled = arrayToFill.fill('(>-_-)>')
        console.log('Fill todos os elementos',arrayAllFilled)
        var arrayPArtFilled = arrayToFill.fill('(>-_-)>', 1, 3)        
        console.log('Fill parte dos elementos',arrayPArtFilled)

        var objToDescruct = {
            nome:'Cenci',
            nascimento: {
                dia: 15,
                mes: 07,
                ano: 1991 }
        }

        var arrayToDescruct = ['Cenci','15/07/1991']

        var [name, dtNasc] = arrayToDescruct
        console.log(name, dtNasc)

        //Forma gambiara de atribuição, longa e repetitiva
        var nome = arrayToDescruct.nome
       // var diaNascimento = arrayToDescruct.nascimento.dia

        //Forma correta que se não existir já adiciona VALOR ao elemento

        var { nome } = objToDescruct
        var { hora = '10:40' } = objToDescruct.nascimento
        console.log('NOME',nome)
        console.log('HORA',hora)

        //SWAP DE VARIAVES COM DESCRITURING
        var a = 10;
        var b = 20;
        [a, b] = [b ,a];
        console.log('A SWAP',a);
        console.log('B SWAP',b);

        //SPREAD
        var arrayOne = ['A','B','C']
        var arrayTwo = ['E','F','G']

        var spreadArray = [...arrayOne, 'D',... arrayTwo]
        console.log('Spread',spreadArray)

        //Chamar a função usando o spread de um tipo interavel
        var ingredientes = ['Filão', 'Batata', 'Barbacue'];
        function makeLanche(valFIXO, tipoPao, Legume, Molho) {
            console.log(valFIXO + ` Your ${tipoPao}, com ${Legume} acompanhado de ${Molho} esta pronto`)
        }
        makeLanche(FIXO = 99, ...ingredientes)

        //PROMISE Evitando CALL BACK HELSS
        //3 Estados resolve, reject, pendind
        const promisseRapida = new Promise((resolve, reject)=>{
            setTimeout(()=>{
                resolve(['gustavao','montanini','cenci'])
            }, 3000)
        });

        const promisseLenta = new Promise((resolve, reject)=>{
            setTimeout(()=>{
                resolve({nome:'gustavao',meio:'montanini',fim:'cenci'})
            }, 5000)
        });

        promisseRapida
            .then((data)=>{
                console.log('Data promisse rapida',data)
                return data
            })
            .then(data => data.map( data =>{
                console.log(data[1])
                throw new Error('ixi de erro')
            }))
            .catch(erro => console.log(erro)) 

        promisseLenta
        .then((data)=>{
            console.log('Data promisse Lenta',data)
        })

        //CLASSE//
        //CONSTRUTOR//
        function Animal(nome, tamanho){
            this.nome = nome;
            this.tamanho = tamanho;
        }
        //METODOS//
        Animal.prototype.hello = function(){
            return `Sou ${this.tamanho} da raça ${this.nome}`
        }

        //INSTANCIANDO OBJ
        const animal = new Animal('cachorro', 'grande')

        //UTILIZANDO Atributos e Metodos da classe Animal
        console.log(animal.hello())
        console.log('Aributo nome',animal.nome)
        console.log('Atributo tamanho',animal.tamanho)

        //Fazendo a msm coisa com a feature CLASS
        class Casa{
                constructor(mtrs, quartos){
                this.mtrs = mtrs;
                this.quartos = quartos;
            }
            
            infoHouse(){
                return console.log(`A Casa tem ${this.mtrs} metros e ${this.quartos} quartos`)
            }

            get mtrsCasa(){
                console.log(`${this.mtrs}`)
            }

            set areaUtil(areaUtil){
                this.areaUtil = areaUtil
            }
        }

        const casaObj = new Casa(55,2);
        console.log('Atributos Classe Casa',casaObj)
        console.log(casaObj.infoHouse())
        // console.log('Get',casaObj.mtrsCasa());
        // this.casaObj.areaUtil(85);

    </script>
</html>
